module.exports=function(e){var s={};function t(o){if(s[o])return s[o].exports;var n=s[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=e,t.c=s,t.d=function(e,s,o){t.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,s){if(1&s&&(e=t(e)),8&s)return e;if(4&s&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&s&&"string"!=typeof e)for(var n in e)t.d(o,n,function(s){return e[s]}.bind(null,n));return o},t.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,"a",s),s},t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},t.p="",t(t.s=10)}([function(e,s){e.exports=flarum.core.compat["common/app"]},function(e,s){e.exports=flarum.core.compat["common/extend"]},function(e,s){e.exports=flarum.core.compat["forum/components/SettingsPage"]},function(e,s){e.exports=flarum.core.compat["common/utils/string"]},function(e,s){e.exports=flarum.core.compat["common/components/Switch"]},function(e,s){e.exports=flarum.core.compat["common/utils/Stream"]},function(e,s){e.exports=flarum.core.compat["forum/states/DiscussionListState"]},function(e,s){e.exports=flarum.core.compat["forum/components/DiscussionListItem"]},function(e,s){e.exports=flarum.core.compat["common/components/FieldSet"]},function(e,s){e.exports=flarum.core.compat["common/utils/ItemList"]},function(e,s,t){"use strict";t.r(s);var o=t(0),n=t.n(o),r=t(1),i=t(6),c=t.n(i),a=t(7),p=t.n(a),u=t(3);var f=t(2),l=t.n(f),d=t(8),y=t.n(d),x=t(9),h=t.n(x),b=t(4),S=t.n(b),g=t(5),w=t.n(g);n.a.initializers.add("ianm-synopsis",(function(){Object(r.extend)(c.a.prototype,"requestParams",(function(e){e.include.push(["firstPost","lastPost"])})),Object(r.extend)(p.a.prototype,"infoItems",(function(e){var s=this.attrs.discussion;if(!n.a.session.user||n.a.session.user.preferences().showSynopsisExcerpts){var t="first"===n.a.forum.attribute("synopsis.excerpt_type")?s.firstPost():s.lastPost(),o=n.a.forum.attribute("synopsis.excerpt_length"),r=n.a.forum.attribute("synopsis.rich_excerpts"),i=!!n.a.session.user&&n.a.session.user.preferences().showSynopsisExcerptsOnMobile;if(t){var c=m("div",null,r?m.trust(Object(u.truncate)(t.contentHtml(),o)):Object(u.truncate)(t.contentPlain(),o));e.add(i?"excerptM":"excerpt",c,-100)}}})),Object(r.extend)(l.a.prototype,"oninit",(function(){this.showSynopsisExcerpts=w()(this.user.preferences().showSynopsisExcerpts),this.showSynopsisExcerptsOnMobile=w()(this.user.preferences().showSynopsisExcerptsOnMobile)})),Object(r.extend)(l.a.prototype,"settingsItems",(function(e){e.add("synopsis",y.a.component({label:app.translator.trans("ianm-synopsis.forum.user.settings.summaries-heading"),className:"Settings-Synopsis"},this.summariesItems().toArray()))})),l.a.prototype.summariesItems=function(){var e=this,s=new h.a;return s.add("synopsis-excerpts",S.a.component({state:this.user.preferences().showSynopsisExcerpts,onchange:function(s){e.showSynopsisExcerptsLoading=!0,e.user.savePreferences({showSynopsisExcerpts:s}).then((function(){e.showSynopsisExcerptsLoading=!1,m.redraw()}))},loading:this.showSynopsisExcerptsLoading},app.translator.trans("ianm-synopsis.forum.user.settings.show-summaries"))),this.user.preferences().showSynopsisExcerpts&&s.add("synopsis-excerpts-mobile",S.a.component({state:this.user.preferences().showSynopsisExcerptsOnMobile,disabled:!this.user.preferences().showSynopsisExcerpts,onchange:function(s){e.showSynopsisExcerptsOnMobileLoading=!0,e.user.savePreferences({showSynopsisExcerptsOnMobile:s}).then((function(){e.showSynopsisExcerptsOnMobileLoading=!1,window.location.reload()}))},loading:this.showSynopsisExcerptsOnMobileLoading},app.translator.trans("ianm-synopsis.forum.user.settings.show-summaries-mobile"))),s}}))}]);
//# sourceMappingURL=forum.js.map